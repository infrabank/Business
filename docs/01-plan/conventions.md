# LLM Cost Manager - Coding Conventions

> Phase 2 Deliverable: 코딩 규칙 및 프로젝트 표준

**Version**: 1.0
**Date**: 2026-02-15
**Level**: Dynamic

---

## 1. Naming Conventions

| Target | Rule | Example |
|--------|------|---------|
| Components | PascalCase | `StatCard`, `CostTrendChart` |
| Hooks | camelCase, use- prefix | `useDashboard`, `useAuth` |
| Functions | camelCase | `fetchUsage()`, `handleSubmit()` |
| Constants | UPPER_SNAKE_CASE | `MAX_API_KEYS`, `API_BASE_URL` |
| Types/Interfaces | PascalCase, no I- prefix | `User`, `ApiResponse` |
| Enums | PascalCase | `ProviderType`, `AlertType` |
| Files (component) | PascalCase.tsx | `StatCard.tsx` |
| Files (utility/service) | kebab-case.ts | `encryption.service.ts` |
| Folders | kebab-case | `api-keys/`, `usage-sync/` |
| CSS classes | Tailwind utility | `className="flex items-center gap-2"` |
| Env vars (client) | NEXT_PUBLIC_ prefix | `NEXT_PUBLIC_APP_URL` |
| Env vars (server) | No prefix | `ENCRYPTION_KEY` |

## 2. Import Order

```typescript
// 1. React/Next.js
import { useState, useEffect } from 'react'
import { useRouter } from 'next/navigation'

// 2. External libraries
import { useQuery } from '@tanstack/react-query'
import { create } from 'zustand'

// 3. Internal absolute imports (@/)
import { Button } from '@/components/ui/Button'
import { useAuth } from '@/features/auth/hooks/useAuth'

// 4. Relative imports
import { StatCard } from './StatCard'

// 5. Type imports
import type { User, Organization } from '@/types'
```

## 3. File/Folder Structure Rules

```
src/
├── app/                          # Next.js App Router (pages only)
│   ├── (auth)/                   # Auth route group (no layout sharing)
│   ├── (dashboard)/              # Dashboard route group (shared layout)
│   └── api/                      # API routes
├── components/                   # Shared UI components
│   ├── layout/                   # Layout components (NavBar, Footer)
│   └── ui/                       # Primitive UI (Button, Card, Input)
├── features/                     # Feature modules (self-contained)
│   └── {feature}/
│       ├── components/           # Feature-specific components
│       ├── hooks/                # Feature-specific hooks
│       └── index.ts              # Public exports
├── services/                     # Business logic (no UI dependency)
│   └── providers/                # LLM provider adapters
├── lib/                          # Infrastructure (API clients, utils)
└── types/                        # Shared TypeScript types
```

**Rules:**
- `features/` 모듈은 자기 완결적. 다른 feature를 직접 import 금지.
- `services/`는 UI 의존성 없음. React import 금지.
- `components/ui/`는 비즈니스 로직 없음. 순수 프레젠테이션만.
- `types/`는 외부 의존성 없음. 순수 타입만.

## 4. Component Conventions

```tsx
// 1. Props interface 정의
interface StatCardProps {
  title: string
  value: number
  change?: number
}

// 2. Named export (default export 지양)
export function StatCard({ title, value, change }: StatCardProps) {
  return (
    <div className="rounded-lg border bg-white p-6 shadow-sm">
      <p className="text-sm text-gray-500">{title}</p>
      <p className="text-2xl font-bold">{value}</p>
      {change !== undefined && (
        <p className={change >= 0 ? 'text-red-500' : 'text-green-500'}>
          {change >= 0 ? '+' : ''}{change}%
        </p>
      )}
    </div>
  )
}
```

## 5. Error Handling

```typescript
// API Route error handling
export async function GET(request: Request) {
  try {
    // ... business logic
    return Response.json({ data: result })
  } catch (error) {
    if (error instanceof ValidationError) {
      return Response.json({ error: { code: 'VALIDATION_ERROR', message: error.message } }, { status: 400 })
    }
    return Response.json({ error: { code: 'INTERNAL_ERROR', message: 'Internal server error' } }, { status: 500 })
  }
}
```

## 6. State Management

- **Server State**: TanStack Query (API 데이터 캐싱/동기화)
- **Client State**: Zustand (UI 상태, 세션 정보)
- **Form State**: react-hook-form (폼 입력/유효성 검사)
- **URL State**: Next.js searchParams (필터, 페이지네이션)

## 7. Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `NEXT_PUBLIC_APP_URL` | Y | - | 앱 URL |
| `NEXT_PUBLIC_BKEND_PROJECT_URL` | Y | - | bkend.ai 프로젝트 URL |
| `BKEND_API_KEY` | Y | - | bkend.ai 서버 API 키 |
| `ENCRYPTION_KEY` | Y | - | AES-256 API 키 암호화 키 (32bytes hex) |

---

*Generated by bkit PDCA System*
